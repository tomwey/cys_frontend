<!--
  Generated template for the RedpackResultPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<!-- <ion-header no-border>

  <ion-navbar>
    <ion-title></ion-title>
  </ion-navbar>

</ion-header> -->

<ion-content>
  <div class="result-head">
    <img [src]="redpack && redpack.owner && redpack.owner.avatar" class="avatar"/>
    <h2 class="name">{{redpack && redpack.owner && redpack.owner.nickname}}</h2>
    <p class="hb-subject" text-wrap *ngIf="!!redpack">{{redpack.subject || '恭喜发财，大吉大利'}}</p>
  </div>
  
  <div [class.hb-result]="!!redpackResult" *ngIf="!!redpackResult">
    <p class="summary">
      恭喜您获得一个
      <span class="red">{{redpackResult.is_cash ? '现金' : '消费'}}红包</span>
    </p>
    <p class="money">{{redpackResult.money}} <span class="unit">元</span></p>
    <div class="message" *ngIf="!!redpackResult.qrcode_url">
      <img [src]="redpackResult.qrcode_url"
        class="qrcode-img" />
      <p class="help-text">向商家出示此二维码，商家扫码确认消费</p>
    </div>
    <div padding>
      <button ion-button full (click)="goHome()">
        {{redpackResult.is_cash ? '回首页领取红包' : '回首页'}}
      </button>
    </div>
  </div>
  <div *ngIf="redpackError" [class.hb-result]="redpackError">
    <div class="message">
      {{redpackError.code == 500 ? '服务器出错了~' : redpackError.message}}
    </div>
    <div padding>
        <button margin-bottom ion-button full *ngIf="redpackError.code == 500"
         (click)="openRedpack()" color="secondary">
          点击再拆一次红包
        </button>
        <button ion-button full (click)="goHome()">
          回首页
        </button>
    </div>
  </div>

</ion-content>
